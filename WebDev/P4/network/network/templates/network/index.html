{% extends "network/layout.html" %}
{% load static %}

{% block body %}
    <input type="hidden" id="csrf-token" value="{{ csrf_token }}">

    <div id="posts-div">
        {% for post in post_page %}
            <div class="post-div">
                <input type="hidden" class="post-id" value="{{ post.id }}">
                <div class="post-header-div">
                    <h5 class="post-user"><a href="{% url 'profile' post.user.id %}">@{{ post.user.username }}</a></h5>
                    <div class="post-datetime">{{ post.datetime }}</div>
                </div>
                <div class="post-content-div">
                    <p class="post-content">{{ post.content }}</p>
                    {% if user.id == post.user.id %}
                        <button class="edit-post-button" onclick="edit_post(this)">edit</button>
                    {% endif %}
                </div>
                <div class="post-like-div">
                    <p class="post-likes">❤️ <span class="likes-count">{{ post.likes_count }}</span></p>
                    <button class="like-post-button" onclick="like_post(this)">like</button>
                </div>
            </div>
        {% endfor %}

        {% if post_page %}
            <nav aria-label="Page navigation example" id="pagination-nav">
                <ul class="pagination">
                    {% if page_no != 1 %}
                        <li class="page-item">
                            <a class="page-link" data-page="{{ page_no|add:-1 }}" onclick="fetch_page(this, '{{ filter }}')">Previous</a>
                        </li>
                    {% endif %}
                    {% for num in page_list %}
                        {% if num == page_no %}
                            <li class="page-item active" aria-current="page">
                                <a class="page-link" href="#">{{ num }}</a>
                            </li>
                        {% else %}
                            <li class="page-item">
                                <a class="page-link" data-page="{{ num }}" onclick="fetch_page(this, '{{ filter }}')">{{ num }}</a>
                            </li>
                        {% endif %}
                    {% endfor %}
                    {% if page_no != page_count %}
                        <li class="page-item">
                            <a class="page-link" data-page="{{ page_no|add:1 }}" onclick="fetch_page(this, '{{ filter }}')">Next</a>
                        </li>
                    {% endif %}
                </ul>
            </nav>
        {% endif %}
    </div>
    
{% endblock %}